# Configuration de sécurité Apache

# Désactiver l'affichage des informations du serveur
ServerTokens Prod
ServerSignature Off

# Configuration des permissions par défaut
<Directory />
    Options -Indexes -FollowSymLinks
    AllowOverride None
    Require all denied
</Directory>

# Configuration pour le répertoire web
<Directory /var/www/html>
    Options -Indexes +FollowSymLinks
    AllowOverride All
    Require all granted
</Directory>

# Sécurité des fichiers sensibles
<FilesMatch "\.(htaccess|htpasswd|ini|log|sh|sql|conf)$">
    Require all denied
</FilesMatch>

# Sécurité des fichiers de configuration
<FilesMatch "^(composer\.(json|lock)|package\.json|yarn\.lock|\.env.*)$">
    Require all denied
</FilesMatch>

# Sécurité des fichiers de clés
<FilesMatch "\.(key|pem|crt|p12|pfx)$">
    Require all denied
</FilesMatch>

# Désactiver l'exécution de scripts dans les répertoires d'upload
<DirectoryMatch "^/var/www/html/.*/(uploads|tmp|cache)/">
    <FilesMatch "\.(php|php3|php4|php5|phtml|pl|py|jsp|asp|sh|cgi)$">
        Require all denied
    </FilesMatch>
</DirectoryMatch>

# Limiter la taille des requêtes
LimitRequestBody 10485760

# Configuration des timeouts
Timeout 300
KeepAliveTimeout 5
MaxKeepAliveRequests 100
